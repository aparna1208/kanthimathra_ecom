{% extends 'web/base.html' %}
{% load static %}
{% block content %}


    <!-- PRODUCT DETAIL (Flipkart-style, White + Brown theme) -->
    <section class="bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 py-10">

            <!-- TOP: Image left + Info right -->
            <div class="grid gap-8 lg:grid-cols-12">

                <!-- LEFT: IMAGE AREA -->
                <div class="lg:col-span-5">
                    <div class="grid grid-cols-12 gap-4">

                        <!-- Thumbnails -->
                        <div class="col-span-2 hidden sm:flex flex-col gap-3">
                            {% for img in images %}
                            <button class="thumbBtn border-2 border-brownMain rounded-lg overflow-hidden bg-white"
                                data-img="{{ img.image.url }}" aria-label="Thumbnail 1">
                                <img src="{{ img.image.url }}" class="w-full aspect-square object-cover"
                                    alt="{{ product.name }}">
                            </button>
                            {% endfor %}

                            
                        </div>

                        <!-- Main Image -->
                        <div class="col-span-12 sm:col-span-10">
                            <div class="relative border border-line rounded-lg overflow-hidden bg-white">

                                <!-- Wishlist -->
                                <button class="absolute top-3 right-3 z-10 h-10 w-10 rounded-full bg-white border border-line shadow-sm
                                grid place-items-center hover:bg-soft transition" 
                                data-product="{{ product.id }}"
                                aria-label="Add to wishlist">

                                {% if is_wishlisted %}
                                    <svg xmlns="http://www.w3.org/2000/svg"
                                    class="h-5 w-5 text-brownMain"
                                    viewBox="0 0 24 24" fill="currentColor" 
                                    stroke="currentColor" stroke-width="2">
                                      </svg>  
                
                                {% else %}
                                    <svg xmlns="http://www.w3.org/2000/svg" 
                                    class="h-5 w-5 text-zinc-400"
                                    fill="none" viewBox="0 0 24 24" 
                                    stroke="currentColor" stroke-width="2">
                                {% endif %} 
                                    <path stroke-linecap="round" stroke-linejoin="round" 
                                    d="M20.8 4.6c-1.8-1.7-4.7-1.5-6.3.4L12 7.6 9.5 5
                       c-1.6-1.9-4.5-2.1-6.3-.4-2 1.9-2 5.2 0 7.1
                       l8.8 8.5 8.8-8.5c2-1.9 2-5.2 0-7.1z" />
                                    </svg>
                                   
                                </button>

                                <!-- Main Image Wrapper -->
                                <div id="zoomContainer"
                                    class="relative overflow-hidden rounded-2xl border border-line bg-white cursor-zoom-in">

                                    <img id="mainImage" src="{{ product.thumbnail.url }}" alt="{{ product.name }}"
                                        class="w-full h-full object-contain transition-transform duration-200 ease-out" />
                                </div>

                            </div>

                            <!-- Mobile thumbnails row -->
                            <div class="mt-4 sm:hidden flex gap-3 overflow-x-auto pb-1">
                                <button
                                    class="thumbBtnM border-2 border-brownMain rounded-lg overflow-hidden shrink-0 w-20"
                                    data-img="images/products/clencer/p1.jpg">
                                    <img src="{{ product.thumbnail.url }}" class="w-full aspect-square object-cover"
                                        alt="">
                                </button>

                                <!-- <button class="thumbBtnM border border-line rounded-lg overflow-hidden shrink-0 w-20"
                                    data-img="images/products/clencer/p2.jpg">
                                    <img src="images/products/clencer/p2.jpg" class="w-full aspect-square object-cover"
                                        alt="">
                                </button>

                                <button class="thumbBtnM border border-line rounded-lg overflow-hidden shrink-0 w-20"
                                    data-img="images/products/clencer/p3.jpg">
                                    <img src="images/products/clencer/p3.jpg" class="w-full aspect-square object-cover"
                                        alt="">
                                </button>

                                <button class="thumbBtnM border border-line rounded-lg overflow-hidden shrink-0 w-20"
                                    data-img="images/products/clencer/p1.jpg">
                                    <img src="images/products/clencer/p1.jpg" class="w-full aspect-square object-cover"
                                        alt="">
                                </button>
                                <button class="thumbBtnM border border-line rounded-lg overflow-hidden shrink-0 w-20"
                                    data-img="images/products/clencer/p2.jpg">
                                    <img src="images/products/clencer/p2.jpg" class="w-full aspect-square object-cover"
                                        alt="">
                                </button> -->
                            </div>
                        </div>

                    </div>
                </div>

                <!-- RIGHT: PRODUCT INFO + BUTTONS -->
                <div class="lg:col-span-7">

                    <h1 class="text-xl sm:text-2xl font-medium text-zinc-900 leading-snug">
                        {{product.name}}
                    </h1>

                    <!-- Ratings line -->
                    <div class="mt-2 flex flex-wrap items-center gap-3 text-sm">
                        <div
                            class="inline-flex items-center gap-1 rounded bg-brownMain text-white px-2 py-0.5 font-semibold">
                            4.3
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24"
                                fill="currentColor">
                                <path
                                    d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z" />
                            </svg>
                        </div>
                        <div class="text-zinc-600">1,248 Ratings & 210 Reviews</div>
                        <span class="text-brownMain font-medium">Clinic-guided</span>
                    </div>

                    <!-- Price -->
                    <div class="mt-4 flex flex-wrap items-end gap-3">
                        <div class="text-3xl font-semibold text-zinc-900">₹{{ product.price }}</div>
                        <!-- <div class="text-sm text-zinc-500 line-through">₹899</div> -->
                        <!-- <div class="text-sm font-semibold text-brownMain">22% off</div> -->
                    </div>

                    <div class="mt-2 text-sm text-zinc-600">
                        Inclusive of taxes
                    </div>

                    <!-- Product Highlights -->
                    <div class="mt-6">
                        <div class="text-sm font-semibold text-zinc-900 mb-3">
                            Product Description
                        </div>

                        <ul class="space-y-2 text-sm text-zinc-700">
                            <li class="flex gap-3">
                                <span class="mt-1.5 h-2 w-2 rounded-full bg-brownMain"></span>
                                <span>{{product.description}}</span>
                            </li>

                            <!-- <li class="flex gap-3">
                                <span class="mt-1.5 h-2 w-2 rounded-full bg-brownMain"></span>
                                <span>Clinic-first approach with practitioner-backed formulation</span>
                            </li>

                            <li class="flex gap-3">
                                <span class="mt-1.5 h-2 w-2 rounded-full bg-brownMain"></span>
                                <span>No added artificial colours, fragrances, or parabens</span>
                            </li>

                            <li class="flex gap-3">
                                <span class="mt-1.5 h-2 w-2 rounded-full bg-brownMain"></span>
                                <span>Suitable for long-term, routine-based use</span>
                            </li>

                            <li class="flex gap-3">
                                <span class="mt-1.5 h-2 w-2 rounded-full bg-brownMain"></span>
                                <span>Manufactured under hygienic, quality-controlled conditions</span>
                            </li> -->
                        </ul>
                    </div>


                    <!-- Buttons (RIGHT COLUMN ONLY) -->
                    <div class="mt-6 grid grid-cols-2 gap-3">
                    <!-- <button type="button"
                    class="h-12 rounded-md border-2 border-brownMain text-brownMain font-semibold add-to-cart-btn"
                    data-product="{{ product.id }}">
                    ADD TO CART
                    </button> -->
                    <form method="POST" action="{% url 'web:add_to_cart' %}" class="w-full">
                    {% csrf_token %}
                    <input type="hidden" name="product_id" value="{{ product.id }}">

                    <button 
                        type="submit"
                        class="w-full h-12 rounded-md border-2 border-brownMain 
                            text-brownMain font-semibold text-base
                            hover:bg-brownMain hover:text-white transition">
                        ADD TO CART
                    </button>
                </form>
                        <button
                            class="h-12 rounded-md bg-brownMain text-white font-semibold hover:bg-brownDark transition">
                            BUY NOW
                        </button>
                    </div>

                    <!-- Small notes -->
                    <div class="mt-4 text-xs text-zinc-500">
                        *Clinic-guided use recommended for best results.
                    </div>

                </div>
            </div>

            <!-- BOTTOM: FULL WIDTH DESCRIPTION / SPECS -->
            <div class="mt-10 border-t border-line pt-10">
                <div class="grid gap-6 lg:grid-cols-12">

                    <!-- Description -->
                    <!-- <div class="lg:col-span-8 rounded-2xl border border-line bg-white p-6">
                        <h2 class="text-sm font-semibold text-zinc-900">Description</h2>
                        <p class="mt-3 text-sm text-zinc-700 leading-relaxed">
                            {{product.description}}
                        </p> -->

                        <!-- <div class="mt-5">
                            <h3 class="text-sm font-semibold text-zinc-900">How to use</h3>
                            <ul class="mt-3 space-y-2 text-sm text-zinc-700 list-disc pl-5">
                                <li>Wet hair and apply a small amount to scalp.</li>
                                <li>Massage gently for 60 seconds.</li>
                                <li>Rinse thoroughly. Repeat if needed.</li>
                            </ul>
                        </div> -->
                    </div>

                    <!-- Specs -->
                    <!-- <div class="lg:col-span-4 rounded-2xl border border-line bg-white p-6">
                        <h2 class="text-sm font-semibold text-zinc-900">Specifications</h2>

                        <div class="mt-4 space-y-3 text-sm">
                            <div class="flex justify-between gap-4">
                                <span class="text-zinc-500">Net Quantity</span>
                                <span class="text-zinc-900 font-medium">200 ml</span>
                            </div>
                            <div class="flex justify-between gap-4">
                                <span class="text-zinc-500">Category</span>
                                <span class="text-zinc-900 font-medium">{{product.category}}</span>
                            </div>
                            <div class="flex justify-between gap-4">
                                <span class="text-zinc-500">Shelf Life</span>
                                <span class="text-zinc-900 font-medium">24 Months</span>
                            </div>
                            <div class="flex justify-between gap-4">
                                <span class="text-zinc-500">Country</span>
                                <span class="text-zinc-900 font-medium">India</span>
                            </div>
                        </div>
                    </div> -->

                </div>
            </div>

        </div>
    </section>









    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brownMain: '#6B3F2A',
                        brownDark: '#4A2A1C',
                        line: '#E9E2DA',
                        soft: '#FAF8F5',
                    },
                    boxShadow: {
                        soft: '0 12px 35px rgba(0,0,0,0.08)',
                    }
                }
            }
        }
    </script>
    <script src="{% static 'web/js/script.js' %}"></script>
    <script src="{% static 'web/js/product.js' %}"></script>
    <script src="{% static 'web/js/wishlist.js' %}"></script>
    <script src="{% static 'web/js/main.js' %}"></script>
    <script src="{% static 'web/js/cart.js' %}"></script>



{% endblock  %}