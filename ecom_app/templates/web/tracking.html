{% extends 'web/base.html' %}
{% load static %}
{% block content %}

    <!-- PAGE HEADER -->
    <section class="relative border-b border-line min-h-[40vh] sm:min-h-[60vh] flex items-center">

        <!-- Background image -->
        <div class="absolute inset-0 bg-cover bg-center pagebanner"></div>

        <!-- Overlay for readability -->
        <div class="absolute inset-0 bg-white/80"></div>

        <!-- Content -->
        <div class="relative px-6 w-full">
            <div class="max-w-8xl mx-auto py-12 sm:py-16">

                <div class="flex flex-col sm:flex-row sm:items-end sm:justify-between gap-4">
                    <div>
                        <div class="text-sm sm:text-lg text-brownMain font-medium">
                            Sign In
                        </div>

                        <h1 class="mt-2 text-4xl sm:text-6xl font-[500] leading-[1.1] tracking-[-0.02em]"
                            style="font-family:'Cormorant Garamond', serif;">
                            Access your care journey
                        </h1>

                        <p class="mt-3 text-zinc-700 max-w-2xl">
                            Log in to track orders, manage addresses, and continue your personalised
                            Ayurvedic care experience securely.
                        </p>
                    </div>
                </div>

            </div>
        </div>
    </section>



    <section class="py-16 sm:py-20 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6">

            <!-- Heading -->
            <div class="flex flex-col sm:flex-row sm:items-end sm:justify-between gap-4">
                <div>
                    <div class="text-sm sm:text-lg text-brownMain font-medium">Order Tracking</div>
                    <h2 class="mt-2 text-3xl sm:text-5xl font-[500] leading-[1.1] tracking-[-0.02em]"
                        style="font-family:'Cormorant Garamond', serif;">
                        Track your delivery in real time
                    </h2>
                    <p class="mt-3 text-zinc-600 max-w-2xl">
                        Enter your order ID to view updates, timeline, and delivery details.
                    </p>
                </div>
            </div>

            <!-- Search -->
            <div class="mt-8 rounded-3xl border border-line bg-white p-5 sm:p-6 shadow-soft">
                <form id="trackForm" class="flex flex-col sm:flex-row gap-3 sm:items-center">
                    <div class="flex-1">
                        <label class="text-sm font-medium text-zinc-900">Order ID</label>
                        <input id="orderId" placeholder="Eg: KM12840629" class="mt-2 w-full rounded-2xl border border-line bg-white px-4 py-3 text-sm outline-none
                        focus:ring-2 focus:ring-brownMain/20" />
                    </div>

                    <button type="submit"
                        class="sm:mt-6 rounded-2xl bg-brownMain text-white px-6 py-3 text-sm font-semibold hover:bg-brownDark transition">
                        Track Order
                    </button>
                </form>

                <div id="trackError" class="mt-3 text-sm text-red-600 hidden">
                    Please enter a valid Order ID.
                </div>
            </div>

            <!-- Results -->
            <div id="trackResult" class="mt-8 hidden">
                <div class="grid gap-6 lg:grid-cols-12">

                    <!-- Left: Timeline + items -->
                    <div class="lg:col-span-8 space-y-6">

                        <!-- Order summary -->
                        <div class="rounded-3xl border border-line bg-white p-6 shadow-soft">
                            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
                                <div>
                                    <div class="text-sm text-zinc-500">Order</div>
                                    <div class="text-lg font-semibold text-zinc-900">
                                        <span id="orderNo">KM12840629</span>
                                        <span
                                            class="ml-2 text-xs rounded-full bg-soft border border-line px-2 py-1 text-zinc-700">
                                            Prepaid
                                        </span>
                                    </div>
                                    <div class="mt-1 text-sm text-zinc-600">
                                        Expected delivery: <span id="eta" class="font-medium text-zinc-900">Dec 20,
                                            2025</span>
                                    </div>
                                </div>

                                <div
                                    class="inline-flex items-center gap-2 rounded-full bg-emerald-50 text-emerald-700 px-4 py-2 text-sm font-semibold">
                                    <span class="h-2 w-2 rounded-full bg-emerald-500"></span>
                                    <span id="currentStatus">Out for Delivery</span>
                                </div>
                            </div>

                            <!-- Item row -->
                            <div class="mt-5 flex items-center gap-4">
                                <div class="h-16 w-16 rounded-2xl border border-line bg-soft overflow-hidden">
                                    <img id="prodImg" src="images/products/clencer/p1.jpg" alt=""
                                        class="h-full w-full object-cover">
                                </div>
                                <div class="min-w-0">
                                    <a id="prodLink" href="product-detail.html"
                                        class="font-semibold text-zinc-900 hover:text-brownMain transition truncate block">
                                        Herbal Hair Nourishing Oil
                                    </a>
                                    <div class="text-sm text-zinc-500" id="prodMeta">Hair Care • 200 ml • Qty: 1</div>
                                </div>
                                <div class="ml-auto text-sm font-semibold text-zinc-900" id="price">₹699</div>
                            </div>
                        </div>

                        <!-- Timeline -->
                        <div class="rounded-3xl border border-line bg-white p-6 shadow-soft">
                            <h3 class="text-lg font-semibold text-zinc-900">Tracking Timeline</h3>

                            <ol class="mt-5 space-y-5" id="timeline">
                                <!-- injected by JS -->
                            </ol>
                        </div>

                    </div>

                    <!-- Right: Address + map -->
                    <div class="lg:col-span-4 space-y-6">

                        <!-- Address -->
                        <div class="rounded-3xl border border-line bg-white p-6 shadow-soft">
                            <h3 class="text-lg font-semibold text-zinc-900">Delivery Address</h3>

                            <div class="mt-4 text-sm text-zinc-700 leading-relaxed" id="address">
                                62/1238, B Paul Abrao Road, Ayyappankavu, North P.O,<br>
                                Ernakulam – 682018, Kerala, India.
                            </div>

                            <div class="mt-4 pt-4 border-t border-line text-sm text-zinc-700">
                                <div class="flex items-center justify-between">
                                    <span class="text-zinc-500">Contact</span>
                                    <span class="font-medium text-zinc-900">+91 99951 00269</span>
                                </div>
                            </div>
                        </div>

                    </div>

                </div>
            </div>

        </div>
    </section>
    <script>
        const trackForm = document.getElementById('trackForm');
        const orderIdEl = document.getElementById('orderId');
        const trackError = document.getElementById('trackError');
        const trackResult = document.getElementById('trackResult');

        const orderNo = document.getElementById('orderNo');
        const eta = document.getElementById('eta');
        const currentStatus = document.getElementById('currentStatus');

        const prodImg = document.getElementById('prodImg');
        const prodLink = document.getElementById('prodLink');
        const prodMeta = document.getElementById('prodMeta');
        const price = document.getElementById('price');

        const timelineEl = document.getElementById('timeline');

        // Build timeline item
        function timelineItem({ title, desc, time, done, active }) {
            const dotClass = active
                ? 'bg-brownMain ring-4 ring-brownMain/15'
                : done
                    ? 'bg-emerald-500'
                    : 'bg-zinc-300';

            const lineClass = done ? 'bg-emerald-300' : 'bg-line';

            return `
      <li class="relative pl-10">
        <span class="absolute left-2 top-2 h-3 w-3 rounded-full ${dotClass}"></span>
        <span class="absolute left-[13px] top-6 h-[calc(100%-8px)] w-px ${lineClass}"></span>

        <div class="flex items-start justify-between gap-4">
          <div>
            <div class="text-sm font-semibold text-zinc-900">${title}</div>
            <div class="mt-1 text-sm text-zinc-600">${desc}</div>
          </div>
          <div class="text-xs text-zinc-500 whitespace-nowrap">${time}</div>
        </div>
      </li>
    `;
        }

        function renderTimeline(steps) {
            timelineEl.innerHTML = steps.map(timelineItem).join('');
            // last item shouldn't have a line
            const last = timelineEl.querySelector('li:last-child span:nth-child(2)');
            if (last) last.style.display = 'none';
        }

        // Demo data (replace with API response)
        function mockTrack(orderId) {
            return {
                orderId,
                eta: 'Dec 20, 2025',
                status: 'Out for Delivery',
                product: {
                    name: 'Herbal Hair Nourishing Oil',
                    href: 'product-detail.html',
                    img: 'images/products/clencer/p1.jpg',
                    meta: 'Hair Care • 200 ml • Qty: 1',
                    price: '₹699'
                },
                steps: [
                    { title: 'Order placed', desc: 'We received your order.', time: 'Dec 14, 10:25 AM', done: true, active: false },
                    { title: 'Packed', desc: 'Items packed and ready for dispatch.', time: 'Dec 15, 02:10 PM', done: true, active: false },
                    { title: 'Shipped', desc: 'Handed over to delivery partner.', time: 'Dec 16, 11:30 AM', done: true, active: false },
                    { title: 'Out for delivery', desc: 'Courier is on the way to you.', time: 'Dec 20, 09:15 AM', done: false, active: true },
                    { title: 'Delivered', desc: 'Delivered to your address.', time: '—', done: false, active: false }
                ]
            };
        }

        trackForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const id = (orderIdEl.value || '').trim();

            trackError.classList.add('hidden');

            if (!id || id.length < 6) {
                trackError.classList.remove('hidden');
                return;
            }

            const data = mockTrack(id);

            orderNo.textContent = data.orderId;
            eta.textContent = data.eta;
            currentStatus.textContent = data.status;

            prodImg.src = data.product.img;
            prodLink.textContent = data.product.name;
            prodLink.href = data.product.href;
            prodMeta.textContent = data.product.meta;
            price.textContent = data.product.price;

            renderTimeline(data.steps);

            trackResult.classList.remove('hidden');
            trackResult.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });
    </script>










    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brownMain: '#6B3F2A',
                        brownDark: '#4A2A1C',
                        line: '#E9E2DA',
                        soft: '#FAF8F5',
                    },
                    boxShadow: {
                        soft: '0 12px 35px rgba(0,0,0,0.08)',
                    }
                }
            }
        }
    </script>
    <script src="{% static 'web/js/script.js' %}"></script>
    <script src="{% static 'web/js/login.js' %}"></script>
{% endblock %}                  